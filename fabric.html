<!DOCTYPE html>
<html ng-app>
  <head>
    <title>Fabric Test</title>


    <!-- Fabric.js CDN -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/fabric.js/1.4.0/fabric.min.js"></script>
    <!-- Angular JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.9/angular.min.js"></script>

	
  </head>

  <body>
	<canvas id="canvas" width="660" height="400" style="border: 1px solid #eee;"></canvas>

	<p>
		<a href="" ng-click="Remove()">remove</a>
	</p>

	
	<script type="text/javascript">
	$(document).ready(function(){

    var canvas = new fabric.Canvas('canvas');
    
    var logo =
    fabric.Image.fromURL('http://upload.wikimedia.org/wikipedia/ru/9/95/Internet_Explorer_9.png', function(img) {
        logo = img.set({ left: 250, top: 250, angle: -10 })
        canvas.add(logo);
        canvas.renderAll();
    });

    $('.switch').click(function(){

        var positionScale = canvas.item(0).getScaleX();
        var positionLeft = canvas.item(0).getLeft();
        var positionTop = canvas.item(0).getTop();
        var positionAngle = canvas.item(0).getAngle();
        
        canvas.remove(logo);
        fabric.Image.fromURL('http://upload.wikimedia.org/wikipedia/commons/e/e7/Mozilla_Firefox_3.5_logo_256.png', function(img) {
            logo = img.set({ left: positionLeft, top: positionTop, angle: positionAngle })
            canvas.add(logo);
            canvas.item(0).scale(positionScale);
            canvas.renderAll();
        });
        
    });

});
//	var canvas = new fabric.Canvas('canvas');
//    
//    var circle = new fabric.Circle({
//      radius: 100,
//      fill: '#eef',
//      scaleY: 0.5
//    });
//    var text = new fabric.IText('hello world', {
//      fontSize: 27,
//    //  left: circle.getWidth() / 2,
//    });
//    
//    //text.set("left",-circle.getWidth()/2+text.getBoundingRectWidth()*2);
//    
//    var group3 = new fabric.Group([circle, text], {
//      left: 400,
//      top: 50,
//      angle: -10
//    });
//    
//    canvas.add(group3);
//    
////    group3.item(1).set({
////      text: 'trololo',
////      fill: 'white'
////    });
//    group3.item(0).setFill('red');
//
////	$scope.Remove = function() {
////    group3.remove(text);    
////  };
//
////      group3.add(text);     
//
//        
////    group3.add(new fabric.Triangle({ 
////      width: 100, 
////      height: 110, 
////      fill: 'yellow'
////    }));    
    

var rect1 = new fabric.Rect({ width: 100, height: 100, fill: 'red' });
var circle1 = new fabric.Circle({ radius: 100, fill: 'green' });
var group1 = new fabric.Group([  circle1, rect1  ], { left: 10, top: 10 });
canvas.add(group1);

	
    group1.add(new fabric.Triangle({ 
      width: 100, 
      height: 110, 
      fill: 'yellow'
    }));    
	
	</script>
	<script src="angular-fabric/utils.js"></script>
	<script src="angular-fabric/app_config.js"></script>
	<script src="angular-fabric/controller.js"></script>
	
	

  </body>
</html>
